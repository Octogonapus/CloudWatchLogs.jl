<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · CloudWatchLogs.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><link href="../assets/invenia.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="../index.html"><img class="logo" src="../assets/logo.png" alt="CloudWatchLogs.jl logo"/></a><h1>CloudWatchLogs.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li class="current"><a class="toctext" href="api.html">API</a><ul class="internal"><li><a class="toctext" href="#LogEvent-1">LogEvent</a></li><li><a class="toctext" href="#Streams-1">Streams</a></li><li><a class="toctext" href="#Handler-1">Handler</a></li></ul></li><li><a class="toctext" href="setup.html">Setup a Test Stack</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="api.html">API</a></li></ul><a class="edit-page" href="https://github.com/invenia/CloudWatchLogs.jl/blob/master/docs/src/pages/api.md#L"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>API</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="API-1" href="#API-1">API</a></h1><h2><a class="nav-anchor" id="LogEvent-1" href="#LogEvent-1">LogEvent</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CloudWatchLogs.LogEvent" href="#CloudWatchLogs.LogEvent"><code>CloudWatchLogs.LogEvent</code></a> — <span class="docstring-category">Type</span>.</div><div><pre><code class="language-none">LogEvent(message::AbstractString, datetime=Dates.now(tz&quot;UTC&quot;))
LogEvent(message::AbstractString, timestamp)</code></pre><p>Log event for submission to CloudWatch Logs.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/CloudWatchLogs.jl/blob/f4fe004ec7c91e0db31e8b585d7618811b228f96/src/event.jl#LL20-L25">source</a></section><h2><a class="nav-anchor" id="Streams-1" href="#Streams-1">Streams</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CloudWatchLogs.CloudWatchLogStream-Tuple{Dict{Symbol,Any},AbstractString,AbstractString}" href="#CloudWatchLogs.CloudWatchLogStream-Tuple{Dict{Symbol,Any},AbstractString,AbstractString}"><code>CloudWatchLogs.CloudWatchLogStream</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">CloudWatchLogStream(config::AWSConfig, log_group_name, log_stream_name)</code></pre><p>Create a reference to a CloudWatch Log Stream on AWS with the log group name and log stream name. This constructor will automatically fetch the latest <a href="https://docs.aws.amazon.com/AmazonCloudWatchLogs/latest/APIReference/API_PutLogEvents.html#CWL-PutLogEvents-request-sequenceToken">sequence token</a> for the stream.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/CloudWatchLogs.jl/blob/f4fe004ec7c91e0db31e8b585d7618811b228f96/src/stream.jl#LL8-L15">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CloudWatchLogs.create_stream" href="#CloudWatchLogs.create_stream"><code>CloudWatchLogs.create_stream</code></a> — <span class="docstring-category">Function</span>.</div><div><pre><code class="language-none">create_stream(config::AWSConfig, log_group_name) -&gt; String
create_stream(config::AWSConfig, log_group_name, log_stream_name) -&gt; String</code></pre><p>Create a CloudWatch Log Stream under a given Log Group. If the log stream name is not provided, one is generated using a UUID4.</p><p>Returns the log stream name.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/CloudWatchLogs.jl/blob/f4fe004ec7c91e0db31e8b585d7618811b228f96/src/stream.jl#LL31-L39">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CloudWatchLogs.delete_stream-Tuple{Dict{Symbol,Any},AbstractString,AbstractString}" href="#CloudWatchLogs.delete_stream-Tuple{Dict{Symbol,Any},AbstractString,AbstractString}"><code>CloudWatchLogs.delete_stream</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">delete_stream(config::AWSConfig, log_group_name, log_stream_name)</code></pre><p>Delete a CloudWatch Log Stream from a given Log Group.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/CloudWatchLogs.jl/blob/f4fe004ec7c91e0db31e8b585d7618811b228f96/src/stream.jl#LL50-L54">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CloudWatchLogs.submit_log-Tuple{CloudWatchLogs.CloudWatchLogStream,CloudWatchLogs.LogEvent}" href="#CloudWatchLogs.submit_log-Tuple{CloudWatchLogs.CloudWatchLogStream,CloudWatchLogs.LogEvent}"><code>CloudWatchLogs.submit_log</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">submit_log(stream::CloudWatchLogStream, event::LogEvent) -&gt; Int</code></pre><p>Call <a href="api.html#CloudWatchLogs.submit_logs-Tuple{CloudWatchLogs.CloudWatchLogStream,AbstractArray{CloudWatchLogs.LogEvent,1}}"><code>submit_logs</code></a> with one event.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/CloudWatchLogs.jl/blob/f4fe004ec7c91e0db31e8b585d7618811b228f96/src/stream.jl#LL275-L279">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CloudWatchLogs.submit_logs-Tuple{CloudWatchLogs.CloudWatchLogStream,AbstractArray{CloudWatchLogs.LogEvent,1}}" href="#CloudWatchLogs.submit_logs-Tuple{CloudWatchLogs.CloudWatchLogStream,AbstractArray{CloudWatchLogs.LogEvent,1}}"><code>CloudWatchLogs.submit_logs</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">submit_logs(stream::CloudWatchLogStream, events::AbstractVector{LogEvent}) -&gt; Int</code></pre><p>Submit a list of log events to AWS.</p><p>None of the log events can be more than 2 hours in the future, or older than 14 days or the retention period of the log group. If this occurs, those log messages will be rejected but the rest will succeed.</p><p>Submission of _all_ log events will fail if:</p><ul><li><p>the log events are more than 1 MiB of data</p></li><li><p>the log events are not in chronological order by timestamp</p></li><li><p>there are more than 10000 log events in <code>events</code></p></li><li><p>the log events span more than 24 hours</p></li></ul><p>Returns the number of events successfully submitted.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/CloudWatchLogs.jl/blob/f4fe004ec7c91e0db31e8b585d7618811b228f96/src/stream.jl#LL142-L159">source</a></section><h2><a class="nav-anchor" id="Handler-1" href="#Handler-1">Handler</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="CloudWatchLogs.CloudWatchLogHandler-Union{Tuple{Dict{Symbol,Any},AbstractString,AbstractString,F}, Tuple{Dict{Symbol,Any},AbstractString,AbstractString}, Tuple{F}} where F&lt;:Memento.Formatter" href="#CloudWatchLogs.CloudWatchLogHandler-Union{Tuple{Dict{Symbol,Any},AbstractString,AbstractString,F}, Tuple{Dict{Symbol,Any},AbstractString,AbstractString}, Tuple{F}} where F&lt;:Memento.Formatter"><code>CloudWatchLogs.CloudWatchLogHandler</code></a> — <span class="docstring-category">Method</span>.</div><div><pre><code class="language-none">CloudWatchLogHandler(
    config::AWSConfig,
    log_group_name,
    log_stream_name,
    formatter::Memento.Formatter,
)</code></pre><p>Construct a Memento Handler for logging to a CloudWatch Log Stream. This constructor creates a task which asynchronously submits logs to the stream.</p><p>A CloudWatch Log Event has only two properties: <code>timestamp</code> and <code>message</code>.</p><p>If a <code>Record</code> has a <code>date</code> property it will be used as the <code>timestamp</code>, otherwise the current time will be captured when <code>Memento.emit</code> is called. All <code>DateTime</code>s will be assumed to be in UTC.</p><p>The <code>message</code> will be generated by calling <code>Memento.format</code> on the <code>Record</code> with this handler&#39;s <code>formatter</code>.</p></div><a class="source-link" target="_blank" href="https://github.com/invenia/CloudWatchLogs.jl/blob/f4fe004ec7c91e0db31e8b585d7618811b228f96/src/handler.jl#LL9-L28">source</a></section><footer><hr/><a class="previous" href="../index.html"><span class="direction">Previous</span><span class="title">Home</span></a><a class="next" href="setup.html"><span class="direction">Next</span><span class="title">Setup a Test Stack</span></a></footer></article></body></html>
